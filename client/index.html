<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CodeSignal Linear Algebra Playground</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./bespoke.css" />
  <link rel="stylesheet" href="./layout.css" />
  <link rel="stylesheet" href="./vector-mode.css" />
  <link rel="stylesheet" href="./matrix-mode.css" />
</head>
<body class="bespoke">
  <!-- Navigation Header -->
  <header class="header">
    <h1>CodeSignal Linear Algebra Playground</h1>
    <!-- APP_SPECIFIC_HEADER_CONTENT -->
    <div class="spacer"></div>
    <div id="status" class="status">Ready</div>
    <button id="btn-help" class="as-button ghost">Help</button>
  </header>

  <!-- Main Application Content -->
  <main class="main-container">
    <!-- Left Sidebar: Control Panel -->
    <aside class="sidebar">
      <!-- Vector Mode Content -->
      <div class="mode-content" data-mode="vector">
      <div class="sidebar-section">
        <div class="section-header">
          <h2>Vectors</h2>
          <select id="coord-mode" class="coord-select">
            <option value="cartesian">Cartesian</option>
            <option value="polar">Polar</option>
          </select>
          <button id="canvas-reset" class="btn-secondary btn-small">Clear </button>
        </div>
        <!-- Vector 1 -->
        <div class="vector-control" id="vector1-control">
          <h3>Vector 1 <span class="vector-label v1-color">v₁</span></h3>
          <div class="vector-info">
            <div class="info-row">
              <span class="label">Coordinates:</span>
              <span id="v1-coords" class="value">Not created</span>
            </div>
            <div class="info-row">
              <span class="label">Magnitude:</span>
              <span id="v1-magnitude" class="value">—</span>
            </div>
          </div>
          <!-- Reflection Control -->
          <div class="reflection-control" data-operation-group="reflection">
            <select id="reflect-type-v1" class="reflect-select">
              <option value="x-axis">X-axis</option>
              <option value="y-axis">Y-axis</option>
              <option value="diagonal">Diagonal (y=x)</option>
            </select>
            <button id="op-reflect-v1" class="btn-primary btn-reflect" disabled>Reflect</button>
          </div>
        </div>

        <!-- Vector 2 -->
        <div class="vector-control" id="vector2-control">
          <h3>Vector 2 <span class="vector-label v2-color">v₂</span></h3>
          <div class="vector-info">
            <div class="info-row">
              <span class="label">Coordinates:</span>
              <span id="v2-coords" class="value">Not created</span>
            </div>
            <div class="info-row">
              <span class="label">Magnitude:</span>
              <span id="v2-magnitude" class="value">—</span>
            </div>
          </div>
          <!-- Reflection Control -->
          <div class="reflection-control" data-operation-group="reflection">
            <select id="reflect-type-v2" class="reflect-select">
              <option value="x-axis">X-axis</option>
              <option value="y-axis">Y-axis</option>
              <option value="diagonal">Diagonal (y=x)</option>
            </select>
            <button id="op-reflect-v2" class="btn-primary btn-reflect" disabled>Reflect</button>
          </div>
        </div>
      </div>

      <!-- Operations Section -->
      <div class="sidebar-section">
        <h2>Operations</h2>

        <div class="operation-group" data-operation-group="addition">
          <div class="operation-label">
            <span>Addition & Subtraction</span>
          </div>
          <button id="op-add" class="btn-primary" disabled>Add v₁ + v₂</button>
          <button id="op-subtract" class="btn-primary" disabled>Subtract v₁ - v₂</button>
        </div>

        <div class="operation-group" data-operation-group="scalarMultiplication">
          <div class="operation-label">
            <span>Scalar Multiplication</span>
          </div>
          <div class="scalar-control">
            <input type="number" id="scalar-input" value="2" step="0.1" />
            <span class="times-symbol">×</span>
            <select id="scale-vector-select" class="scale-select">
              <option value="v1">v1</option>
              <option value="v2">v2</option>
            </select>
            <button id="op-scale" class="btn-primary btn-scale" disabled>Scale</button>
          </div>
        </div>

        <div class="operation-group" data-operation-group="dotProduct">
          <div class="operation-label">
            <span>Dot Product</span>
          </div>
          <button id="op-dot" class="btn-primary" disabled>v₁ · v₂</button>
        </div>

        <div class="operation-group" data-operation-group="projectionAngle">
          <div class="operation-label">
            <span>Projection & Angle</span>
          </div>
          <button id="op-project" class="btn-primary" disabled>Project v₁ onto v₂</button>
          <button id="op-angle" class="btn-primary" disabled>Angle Between v₁ & v₂</button>
        </div>

        <div class="operation-group" data-operation-group="normalization">
          <div class="operation-label">
            <span>Normalization</span>
          </div>
          <div class="normalize-control">
            <select id="normalize-vector-select" class="vector-select">
              <option value="v1">v1</option>
              <option value="v2">v2</option>
            </select>
            <button id="op-normalize" class="btn-primary btn-normalize" disabled>Normalize</button>
          </div>
        </div>

        <div class="operation-group" data-operation-group="perpendicular">
          <div class="operation-label">
            <span>Perpendicular Vector</span>
          </div>
          <div class="perpendicular-control">
            <select id="perpendicular-vector-select" class="vector-select">
              <option value="v1">v1</option>
              <option value="v2">v2</option>
            </select>
            <button id="op-perpendicular" class="btn-primary btn-perpendicular" disabled>Show Perpendicular</button>
          </div>
        </div>

        <div class="operation-group" data-operation-group="linearCombination">
          <div class="operation-label">
            <span>Linear Combination</span>
          </div>
          <div class="linear-combo-control">
            <input type="number" id="lc-scalar-a" placeholder="a" value="1" step="0.1" />
            <input type="number" id="lc-scalar-b" placeholder="b" value="1" step="0.1" />
            <button id="op-linear-combo" class="btn-primary" disabled>1v₁ + 1v₂</button>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div class="sidebar-section">
        <h2>Results</h2>
        <div id="vector-results" class="results-display">
          <p class="hint">Perform an operation to see results</p>
        </div>
      </div>
      </div>
      <!-- End Vector Mode Content -->

      <!-- Matrix Mode Content -->
      <div class="mode-content" data-mode="matrix">
        <div class="sidebar-section">
          <div class="section-header">
            <h2>Matrix</h2>
            <button id="matrix-reset" class="btn-secondary btn-small">Reset</button>
          </div>

          <!-- Matrix Input Grid -->
          <div class="matrix-input-section">
            <div class="matrix-display-wrapper">
              <div class="matrix-label">
                <span class="matrix-name">A</span>
                <span class="matrix-equals">=</span>
                <span class="matrix-brackets">[</span>
                <span class="matrix-basis-vector matrix-col-i">î<sub>A</sub></span>
                <span class="matrix-basis-vector matrix-col-j">ĵ<sub>A</sub></span>
                <span class="matrix-brackets">]</span>
              </div>
              <div class="matrix-grid">
                <div class="matrix-column-headers">
                  <span class="matrix-column-label matrix-col-i">î<sub>A</sub></span>
                  <span class="matrix-column-label matrix-col-j">ĵ<sub>A</sub></span>
                </div>
                <div class="matrix-row">
                  <input type="number" id="m00" class="matrix-input matrix-col-i" value="1" step="0.1">
                  <input type="number" id="m01" class="matrix-input matrix-col-j" value="0" step="0.1">
                </div>
                <div class="matrix-row">
                  <input type="number" id="m10" class="matrix-input matrix-col-i" value="0" step="0.1">
                  <input type="number" id="m11" class="matrix-input matrix-col-j" value="1" step="0.1">
                </div>
              </div>
            </div>
            <div class="matrix-display-wrapper" id="matrix-b-wrapper">
              <div class="matrix-label">
                <span class="matrix-name">B</span>
                <span class="matrix-equals">=</span>
                <span class="matrix-brackets">[</span>
                <span class="matrix-basis-vector matrix-col-i matrix-col-b">î<sub>B</sub></span>
                <span class="matrix-basis-vector matrix-col-j matrix-col-b">ĵ<sub>B</sub></span>
                <span class="matrix-brackets">]</span>
              </div>
              <div class="matrix-grid">
                <div class="matrix-column-headers">
                  <span class="matrix-column-label matrix-col-i matrix-col-b">î<sub>B</sub></span>
                  <span class="matrix-column-label matrix-col-j matrix-col-b">ĵ<sub>B</sub></span>
                </div>
                <div class="matrix-row">
                  <input type="number" id="m00_b" class="matrix-input matrix-col-i matrix-col-b" value="1" step="0.1">
                  <input type="number" id="m01_b" class="matrix-input matrix-col-j matrix-col-b" value="0" step="0.1">
                </div>
                <div class="matrix-row">
                  <input type="number" id="m10_b" class="matrix-input matrix-col-i matrix-col-b" value="0" step="0.1">
                  <input type="number" id="m11_b" class="matrix-input matrix-col-j matrix-col-b" value="1" step="0.1">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Operations Section -->
        <div class="sidebar-section">
          <div class="operation-group">
            <div class="operation-label">
              <span>Determinant</span>
            </div>
            <button id="show-determinant" class="btn-primary">Show Determinant as Area</button>
          </div>
        </div>

        <!-- Results Section -->
        <div class="sidebar-section">
          <h2>Results</h2>
          <div id="matrix-results" class="results-display">
            <p class="hint">Operations results will be displayed here</p>
          </div>
        </div>
      </div>
      <!-- End Matrix Mode Content -->
    </aside>

    <!-- Canvas: Cartesian Plane -->
    <div class="canvas-container">
      <canvas id="grid-canvas"></canvas>
    </div>
  </main>

  <!-- Help Modal (automatically managed by help-modal.js) -->
  <!-- The modal structure is created dynamically by the JavaScript -->

  <!-- Core Scripts -->
  <script src="./help-modal.js"></script>
  <script src="./logger.js"></script>

  <!-- Core Infrastructure (must load before modes) -->
  <script src="./core/status.js"></script>
  <script src="./core/config.js"></script>
  <script src="./core/operation-schemas.js"></script>
  <script src="./core/help.js"></script>
  <script src="./core/mode-manager.js"></script>
  <script src="./core/color-utils.js"></script>
  <script src="./core/theme-service.js"></script>
  <script src="./core/results-panel.js"></script>
  <script src="./core/format-utils.js"></script>
  <script src="./core/vector.js"></script>
  <script src="./core/animator.js"></script>
  <script src="./core/coordinate-system.js"></script>
  <script src="./app.js"></script>

  <!-- Mathematical Entities -->
  <script src="./entities/matrix.js"></script>

  <!-- Mode Implementations -->
  <script src="./modes/vector-sidebar.js"></script>
  <script src="./modes/vector-canvas.js"></script>
  <script src="./modes/vector-operations.js"></script>
  <script src="./modes/vector-mode.js"></script>
  <script src="./modes/matrix-mode.js"></script>

  <!-- Main Application -->
  <script src="./linear-algebra.js"></script>
</body>
</html>
